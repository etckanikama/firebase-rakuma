<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eel</title>
</head>
<body>
    
    <p>ログイン画面</p>
    <input id ="login" type="loin" name="loin" placeholder="パスワードを入力">
    <input id ="submit" type="submit" name="submit" value="ログイン" onclick="login_check();">
    <div id="p">
        <!-- <p id="p1">ログイン</p>
        <p id="p2">text</p> -->
        <p>表示</p>
        <textarea id ="result" name="show" cols="100" rows="3"></textarea>
        <script type="text/javascript" src="/eel.js"></script>
    </div>

    <div id="tool">
        <button id="button" name="button" onclick="run();"> ツール実行ボタン</button>
    </div>



    <script type="text/javascript">
        const _sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));

        eel.expose(write)
        function write(text) {
            result.value = text +"\n";
        }

        function login_check() {
            if (login.value == "" || submit.value == "") {
                alert("パスワードを入力してください");
                return false;
            }
            else {
                eel.login(login.value);
                display();

                _sleep(5000)
                return false;

            }
        }
        // ツールボタンが押されたときにpythonファイルlisting()関数が呼ばれるようにする関数
        eel.expose(run)
        function run() {
            eel.listing();

        }
        // ツールを表示する関数
        eel.expose(display)
        function display(){
            // IDを取得
            var p1 = document.getElementById("tool");
            p1.style.display = "block";
        }
        // ツールを非表示にする関数
        eel.expose(undisplay)
        function undisplay(){
            var p2 = document.getElementById("tool");
            p2.style.display = "none";
        }

    </script>

</body>
</html>